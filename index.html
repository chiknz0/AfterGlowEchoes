<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afterglow Echoes | Digital Salvage</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; background: #020205; color: #e2e8f0; font-family: sans-serif; overflow: hidden; cursor: crosshair; }
        canvas { display: block; }
        #ui { position: absolute; inset: 0; pointer-events: none; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .btn { pointer-events: auto; cursor: pointer; transition: all 0.2s; }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="ui">
        <!-- Start Screen -->
        <div id="start" class="text-center">
            <h1 class="text-9xl font-black text-white mb-2">AFTERGLOW</h1>
            <h1 class="text-9xl font-black text-cyan-900 mb-10">ECHOES</h1>
            <button onclick="startGame()" class="btn px-10 py-5 bg-white text-black font-bold rounded-full text-xl">BEGIN SALVAGE</button>
        </div>
        <!-- HUD -->
        <div id="hud" class="hidden w-full h-full flex flex-col justify-between p-10">
            <div class="flex justify-between w-full">
                <div class="bg-black/60 p-5 rounded-2xl border border-white/10">
                    <div class="text-xs text-slate-500 font-bold uppercase">Salvage Value</div>
                    <div id="score" class="text-4xl font-black text-cyan-400">$0</div>
                </div>
                <div id="timer-box" class="bg-black/60 p-5 rounded-2xl border border-white/10 text-right">
                    <div class="text-xs text-pink-500 font-bold uppercase">Time Left</div>
                    <div id="timer" class="text-4xl font-black text-white">60s</div>
                </div>
            </div>
            <button id="reach" onmousedown="pull()" class="btn mx-auto mb-10 px-20 py-8 bg-white text-black font-black text-3xl rounded-full">REACH</button>
        </div>
        <!-- Legendary Overlay -->
        <div id="legendary" class="hidden fixed inset-0 bg-black/90 flex flex-col items-center justify-center text-center">
            <div class="text-cyan-400 tracking-widest text-sm mb-5 font-bold">LEGENDARY ARTIFACT FOUND</div>
            <div id="leg-emoji" class="text-[12rem] mb-4">ğŸ’</div>
            <div id="leg-name" class="text-4xl font-black text-white uppercase">ANCIENT CORE</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let state = 'START', score = 0, time = 60, pullOff = 0, pulling = false, cooldown = false, last = 0;
        const items = [], stars = [];
        const PRE = ["Ancient", "Holographic", "Neon", "Stellar", "Ghostly", "Hyper", "Cyber"];
        const MAT = ["Quartz", "Iron", "Plasma", "Carbon", "Silicon", "Onyx"];
        const OBJ = ["Relic", "Shard", "Core", "Module", "Tome", "Fragment"];
        const EMO = ["ğŸ—¿", "ğŸº", "ğŸ’¾", "ğŸ’", "âœ¨", "ğŸ”®", "ğŸ“Ÿ", "ğŸ“œ", "ğŸ§©", "â˜„ï¸"];

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();
        for(let i=0; i<100; i++) stars.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*2});

        function startGame() { state = 'PLAYING'; document.getElementById('start').style.display='none'; document.getElementById('hud').style.display='flex'; }
        
        function pull() {
            if (state !== 'PLAYING' || cooldown || pulling) return;
            pulling = true; cooldown = true;
            let step = 0;
            const btn = document.getElementById('reach');
            btn.innerText = "SYNCING..."; btn.style.background = "#1e293b";
            
            const anim = setInterval(() => {
                step += 4;
                if (step <= 100) pullOff = step;
                else if (step === 104) {
                    if (Math.random() > 0.985) {
                        state = 'LEGENDARY';
                        const name = PRE[Math.floor(Math.random()*PRE.length)] + " " + OBJ[Math.floor(Math.random()*OBJ.length)];
                        const emoji = EMO[Math.floor(Math.random()*EMO.length)];
                        document.getElementById('leg-emoji').innerText = emoji;
                        document.getElementById('leg-name').innerText = name;
                        document.getElementById('legendary').style.display = 'flex';
                        setTimeout(() => { score += 45000; state = 'PLAYING'; document.getElementById('legendary').style.display = 'none'; updateScore(); }, 3000);
                    } else {
                        score += Math.floor(Math.random()*2000)+400;
                        items.push({e: EMO[Math.floor(Math.random()*EMO.length)], x: canvas.width/2-40, y: canvas.height-280, vy: -6.5});
                        updateScore();
                    }
                } else if (step > 130 && step <= 230) pullOff = 230 - step;
                else if (step > 230) { clearInterval(anim); pulling = false; setTimeout(() => { cooldown = false; btn.innerText = "REACH"; btn.style.background = "white"; }, 400); }
            }, 16);
        }

        function updateScore() { document.getElementById('score').innerText = "$" + score.toLocaleString(); }

        function loop(ts) {
            ctx.fillStyle = '#020205'; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = 'rgba(255,255,255,0.3)';
            stars.forEach(s => ctx.fillRect(s.x, s.y, s.s, s.s));
            
            if (state === 'PLAYING') {
                if (ts - last >= 1000) { time--; last = ts; document.getElementById('timer').innerText = time + "s"; }
                if (time <= 0) location.reload();

                ctx.fillStyle = '#0f172a'; ctx.beginPath(); ctx.ellipse(canvas.width/2, canvas.height-280, 150, 50, 0, 0, Math.PI*2); ctx.fill();
                ctx.font = '80px Arial';
                items.forEach((it, i) => { ctx.fillText(it.e, it.x, it.y); it.y += it.vy; it.vy -= 0.18; if(it.y < -100) items.splice(i,1); });
                ctx.fillStyle = '#475569';
                ctx.beginPath(); ctx.roundRect(canvas.width/2-45, canvas.height-280-450+(pullOff*4), 90, 450, 45); ctx.fill();
            }
            requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
    </script>
</body>
</html>
